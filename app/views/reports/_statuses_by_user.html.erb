<p>
  <%= t(:amount_inbound_calls) %>
  <%= t(:by_filter) %>
  <%= t(:from) %>
  <%= localize_datetime_str(params[:filter][:start_date]) %>
  <%= t(:to) %>
  <%= localize_datetime_str(params[:filter][:stop_date]) %>
</p>
<%
  t1 = {}
  @result[0].each do |row|
    t1[[row[:user],row[:status]]] = row[:count]
  end
%>
<table class="table table-striped table-bordered table-hover table-heading no-border-bottom table-responsive">
  <thead class="thead-light">
    <tr>
      <th><%= t(:operator) %></th>
      <% @result[0].map{|x| x.status}.uniq.each do |s| %>
        <th><%= s %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @result[0].map{|x| x.user}.uniq.each do |u| %>
      <tr>
        <td><%= u %></td>
        <% @result[0].map{|x| x.status}.uniq.each do |s| %>
          <td>
            <%= t1[[u, s]].to_i %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<p>
  <%= t(:amount_outbound_calls) %>
  <%= t(:by_filter) %>
  <%= t(:from) %>
  <%= localize_datetime_str(params[:filter][:start_date]) %>
  <%= t(:to) %>
  <%= localize_datetime_str(params[:filter][:stop_date]) %>
</p>
<%
  t2 = {}
  @result[1].each do |row|
    t2[[row[:user],row[:status]]] = row[:count]
  end
%>
<table class="table table-striped table-bordered table-hover table-heading no-border-bottom table-responsive">
  <thead class="thead-light">
    <tr>
      <th><%= t(:operator) %></th>
      <% @result[1].map{|x| x.status}.uniq.each do |s| %>
        <th><%= s %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @result[1].map{|x| x.user}.uniq.each do |u| %>
      <tr>
        <td><%= u %></td>
        <% @result[1].map{|x| x.status}.uniq.each do |s| %>
          <td>
            <%= t2[[u, s]].to_i %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>